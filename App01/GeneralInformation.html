{{ extends 'global/Page.html' }}
{{ block title }} General Information and Procedure{{ endblock }}

{{ block content }}

<style>
    .my-box {
        border: 1px solid #ccc;
        padding: 10px;
        background-color: #f9f9f9;
    }
</style>

<div class="my-box">
    Because part of this study is about making decisions in virtual teams, you will have during the experiment to interact with other participants on Prolific.
    Therefore, the study consists of <b>three stages</b>:

    <div style="margin-left: 20px; margin-top: 10px;">
        <b>In Stage 1</b>, you will be asked to answer various questions. Some of your answers are already relevant for stage 2. In this stage, you can proceed at your own pace.
        <br/><br/>
        <b>In Stage 2</b>, you will join a team and get to know your team members. As part of this, you will participate in a 7-minute virtual team meeting. Furthermore, you will make a decision regarding your intended collaboration with this team. In this stage, you have to proceed at the pace of the team.
        <br/><br/>
        <b>In Stage 3</b>, you will be asked to complete three questionnaires. You can proceed through this stage at your own pace. At the end of stage 3, we will inform you about the additional payout you earned.
    </div>

    <br/><br>

    <b><u>Additional Payout:</u></b><br> Your additional payout is determined by your choices and the choices of your team members in stage 1 and stage 2. We will explicitly state which answers affect the additional payout.
    <br/><br>
    In case there are any problems with the team-forming process for stage 2 or dropouts during stage 2 (except if you drop out), you will be compensated for the additional time you spent on it.
</div>


<br>

<div>
    <!-- Countdown-Hinweis -->
    <div id="countdown-container">
        <p>You can proceed in <span id="countdown-timer"></span> seconds.</p>
    </div>

    <!-- Next-Button erst nach Zeit -->
    <div id="next-container" style="display: none;">
        <p>{{ next_button }}</p>
    </div>
</div>

<script>
    const timeout_seconds = 30; // zentral konfigurierbar

    document.addEventListener("DOMContentLoaded", function () {
        const countdownEl = document.getElementById("countdown-timer");
        let secondsLeft = timeout_seconds;

        // Initialer Countdown-Text
        countdownEl.textContent = secondsLeft;

        // Countdown aktualisieren jede Sekunde
        const countdownInterval = setInterval(() => {
            secondsLeft -= 1;
            countdownEl.textContent = secondsLeft;

            if (secondsLeft <= 0) {
                clearInterval(countdownInterval);
                document.getElementById("countdown-container").style.display = "none";
                document.getElementById("next-container").style.display = "block";
            }
        }, 1000);
    });

    // Prevent page refresh (F5, Ctrl+R, Reload)
    document.addEventListener("keydown", function (e) {
        if ((e.key === "F5") || (e.ctrlKey && e.key === "r")) {
            e.preventDefault();
        }
    });
</script>

{{ endblock }}
