{{ extends 'global/Page.html' }}
{{ block title }}Stage 2: Introduction - Bonus Allocation by Success{{ endblock }}

{{ block styles }}
<style>
    .my-box {
        border: 1px solid #ccc;
        padding: 10px;
        background-color: #f9f9f9;
    }

    .selected:not(:first-child) {
        background-color: rgba(255, 0, 0, 0.6);
        font-weight: bolder;
        color: white !important;
        transition: background-color 0.3s ease;
    }

    .radio-group {
        display: flex;
        gap: 20px;
        margin-top: 20px;
    }
</style>
{{ endblock }}

{{ block content }}

<div class="my-box">

    <b>Imagine</b> that <span style="color: rgba(54, 162, 235, 1);">you</span> and <span style="color: rgba(255, 99, 132, 1);">the other two members</span> you just met belong to a virtual team of a firm.
    <b>On a separate page</b>, all of you will make a decision about how many hours, out of a 40-hour work week, you would like to allocate to a joint team project:
    <br><br>

    <ul>
        <li>The team project directly competes with an individual project.</li>
        <li>Any hours (out of the 40) you not allocate to the team project will be automatically allocated to your individual project.   </li>
        <li>The success of the team project and the individual project will determine your bonus payoff for Stage 2.</li>
        <li>The team project is more valuable than the individual project.</li>
        <li>The success of the team project, depends on the <b>minimum</b> contribution of any team member.</li>
        <li>The success of the individual project only depends on the hours you allocate to it.</li>
    </ul>


    The <b> payoff table</b> below shows how your bonus payoff for Stage 2 is determined, depending on <span style="color:  rgba(54, 162, 235, 1);"> your choices</span> (rows) and the <span style="color: rgba(255, 99, 132, 1);;">minimum choice of any team member</span> (columns).
    Selecting your contribution to the team project via the radio buttons will highlight the corresponding row in the payoff table.<br><br>

    <h3 class="card-title text-center">Payoff Table</h3>
    {{ include_sibling 'PayoffTable.html' }}


    <div class="radio-group">
         <span><b>Try out</b> the radio buttons:</span>
        <label><input type="radio" name="choice" value="0"> 0 hour</label>
        <label><input type="radio" name="choice" value="10"> 10 hours</label>
        <label><input type="radio" name="choice" value="20"> 20 hours</label>
        <label><input type="radio" name="choice" value="30"> 30 hours</label>
        <label><input type="radio" name="choice" value="40"> 40 hours</label>
    </div>

</div>

<br/>
{{ next_button }}


<script>
document.addEventListener("DOMContentLoaded", function () {
    let row = document.querySelector("tbody").children[3];
    let rowA = Array.from(row.children);
    rowA.shift();

    function updateSelection(rowIndex) {
        rowA.forEach(el => el.classList.remove("selected"));
        row = document.querySelector("tbody").children[rowIndex];
        rowA = Array.from(row.children);
        rowA.shift();
        rowA.forEach(el => el.classList.add("selected"));
    }

    // Kein Highlight zu Beginn â€“ erst bei Auswahl
    const radios = document.querySelectorAll('input[name="choice"]');
    radios.forEach(radio => {
        radio.addEventListener("change", function () {
            switch (this.value) {
                case "0":
                    updateSelection(1);
                    break;
                case "10":
                    updateSelection(2);
                    break;
                case "20":
                    updateSelection(3);
                    break;
                case "30":
                    updateSelection(4);
                    break;
                case "40":
                    updateSelection(5);
                    break;
            }
        });
    });
});
</script>

{{ endblock }}
