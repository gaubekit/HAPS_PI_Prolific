{{ extends 'global/Page.html' }}
{{ block title }}Stage 2: Introduction - Bonus Payoff 2{{ endblock }}

{{ block styles }}
<style>
    .my-box {
        border: 1px solid #ccc;
        padding: 10px;
        background-color: #f9f9f9;
    }

    .selected:not(:first-child) {
        background-color: rgba(255, 0, 0, 0.6);
        font-weight: bolder;
        color: white !important;
        transition: background-color 0.3s ease;
    }

    .radio-group {
        display: flex;
        gap: 20px;
    }
</style>
{{ endblock }}

{{ block content }}

<div class="my-box">

    <b>Imagine</b> that <span style="color: rgba(54, 162, 235, 1);">you</span> and <span style="color: rgba(255, 99, 132, 1);">the other two members</span> you just met belong to a virtual team of a firm.
    All of you will make a decision about how many hours, out of a 40-hour work week, you would like to allocate to a joint team project. However, the team project competes with an individual project, as follows:
    <br><br>

    <ul>
        <li>The success of the team project, depends on the <b>minimum</b> contribution of any team member.</li>
        <li>The success of the individual project only depends on the hours you allocate to it.</li>
        <li>Any hours (out of the 40) you do not allocate to the team project will be automatically allocated to your individual project.</li>
        <li>The team project is more valuable than the individual project, depending on the minimum contribution.</li>
    </ul>


    The success of the projects is determined by <span style="color:  rgba(54, 162, 235, 1);"> your choices</span> (rows) and the <span style="color: rgba(255, 99, 132, 1);;">minimum choice of any team member</span> (columns).
    The <b> payoff table</b> below shows how your bonus payoff for Stage 2 is calculated:
    <br><br>

    <h4 style="text-align: center;">Payoff Table</h4>
    {{ include_sibling 'PayoffTable.html' }}


    <p>
        Selecting your contribution to the team project via the radio buttons will highlight the corresponding row in the payoff table.
    </p>

    <b>Try out</b> the radio buttons. The radio button on this page will <u>not</u> affect your payoff:

    <div class="radio-group">
        <span><span style="color:  rgba(54, 162, 235, 1);">Your</span> contribution:</span>
        <label><input type="radio" name="choice" value="0"> 0 hour</label>
        <label><input type="radio" name="choice" value="10"> 10 hours</label>
        <label><input type="radio" name="choice" value="20"> 20 hours</label>
        <label><input type="radio" name="choice" value="30"> 30 hours</label>
        <label><input type="radio" name="choice" value="40"> 40 hours</label>
    </div>

</div>

<br/>

<div>
    <!-- Countdown-Hinweis -->
    <div id="countdown-container">
        <p style="color: gray; font-style: italic;">You can proceed in <span id="countdown-timer"></span> seconds.</p>
    </div>

    <!-- Next-Button erst nach Zeit -->
    <div id="next-container" style="display: none;">
        <p>{{ next_button }}</p>
    </div>
</div>

<script>
    const timeout_seconds = 30; // set minimum time

    document.addEventListener("DOMContentLoaded", function () {
        const countdownEl = document.getElementById("countdown-timer");
        let secondsLeft = timeout_seconds;

        // initial countdown-text
        countdownEl.textContent = secondsLeft;

        // update countdown
        const countdownInterval = setInterval(() => {
            secondsLeft -= 1;
            countdownEl.textContent = secondsLeft;

            if (secondsLeft <= 0) {
                clearInterval(countdownInterval);
                document.getElementById("countdown-container").style.display = "none";
                document.getElementById("next-container").style.display = "block";
            }
        }, 1000);
    });

    // Prevent page refresh (F5, Ctrl+R, Reload)
    document.addEventListener("keydown", function (e) {
        if ((e.key === "F5") || (e.ctrlKey && e.key === "r")) {
            e.preventDefault();
        }
    });
</script>


<script>
document.addEventListener("DOMContentLoaded", function () {
    let row = document.querySelector("tbody").children[3];
    let rowA = Array.from(row.children);
    rowA.shift();

    function updateSelection(rowIndex) {
        rowA.forEach(el => el.classList.remove("selected"));
        row = document.querySelector("tbody").children[rowIndex];
        rowA = Array.from(row.children);
        rowA.shift();
        rowA.forEach(el => el.classList.add("selected"));
    }

    // Kein Highlight zu Beginn â€“ erst bei Auswahl
    const radios = document.querySelectorAll('input[name="choice"]');
    radios.forEach(radio => {
        radio.addEventListener("change", function () {
            switch (this.value) {
                case "0":
                    updateSelection(1);
                    break;
                case "10":
                    updateSelection(2);
                    break;
                case "20":
                    updateSelection(3);
                    break;
                case "30":
                    updateSelection(4);
                    break;
                case "40":
                    updateSelection(5);
                    break;
            }
        });
    });
});
</script>

{{ endblock }}
